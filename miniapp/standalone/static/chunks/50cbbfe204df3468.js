(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3116,e=>{"use strict";let s=(0,e.i(75254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>s],3116)},70065,e=>{"use strict";var s=e.i(43476),t=e.i(47163);function r({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function a({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function n({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",e),...r})}function l({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",e),...r})}e.s(["Card",()=>r,"CardContent",()=>l,"CardHeader",()=>a,"CardTitle",()=>n])},78745,e=>{"use strict";let s=(0,e.i(75254).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["default",()=>s])},90571,e=>{"use strict";var s=function(){return(s=Object.assign||function(e){for(var s,t=1,r=arguments.length;t<r;t++)for(var a in s=arguments[t])Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);return e}).apply(this,arguments)};function t(e,s){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>s.indexOf(r)&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)0>s.indexOf(r[a])&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]]);return t}function r(e,s,t,r){return new(t||(t=Promise))(function(a,n){function l(e){try{i(r.next(e))}catch(e){n(e)}}function d(e){try{i(r.throw(e))}catch(e){n(e)}}function i(e){var s;e.done?a(e.value):((s=e.value)instanceof t?s:new t(function(e){e(s)})).then(l,d)}i((r=r.apply(e,s||[])).next())})}function a(e,s,t){if(t||2==arguments.length)for(var r,a=0,n=s.length;a<n;a++)!r&&a in s||(r||(r=Array.prototype.slice.call(s,0,a)),r[a]=s[a]);return e.concat(r||Array.prototype.slice.call(s))}"function"==typeof SuppressedError&&SuppressedError,e.s(["__assign",()=>s,"__awaiter",()=>r,"__rest",()=>t,"__spreadArray",()=>a])},71689,e=>{"use strict";let s=(0,e.i(75254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>s],71689)},91171,e=>{"use strict";var s=e.i(43476),t=e.i(71645),r=e.i(18566),a=e.i(78745),a=a,n=e.i(3116),l=e.i(65056),d=e.i(40921),i=e.i(88844),c=e.i(73884);let o=(0,e.i(75254).default)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);var u=e.i(71689),m=e.i(67881),x=e.i(70065),f=e.i(20755),h=e.i(47163);let p=[{key:"pending",label:"Заказ принят",icon:n.Clock},{key:"confirmed",label:"Подтверждён",icon:a.default},{key:"preparing",label:"Готовится",icon:l.ChefHat},{key:"delivering",label:"В пути",icon:d.Bike},{key:"delivered",label:"Доставлен",icon:i.Package}],g={pending:"bg-amber-500",confirmed:"bg-blue-500",preparing:"bg-orange-500",delivering:"bg-primary",delivered:"bg-green-500",cancelled:"bg-destructive"},j={delivery:"Доставка",pickup:"Самовывоз",preorder:"Предзаказ"};function b({order:e}){let l,d=(0,r.useRouter)(),[i,b]=(0,t.useState)(e);(0,t.useEffect)(()=>{let e=(0,f.createClient)(),s=e.channel(`order-${i.id}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"orders",filter:`id=eq.${i.id}`},e=>{b(s=>({...s,...e.new}))}).subscribe();return()=>{e.removeChannel(s)}},[i.id]);let y=p.findIndex(e=>e.key===i.status),N="cancelled"===i.status,v="delivered"===i.status;return(0,s.jsxs)("div",{className:"min-h-screen bg-background pb-24",children:[(0,s.jsxs)("header",{className:"sticky top-0 z-50 flex items-center gap-3 bg-background px-4 py-3 border-b border-border",children:[(0,s.jsx)("button",{onClick:()=>d.push("/"),className:"text-foreground",children:(0,s.jsx)(u.ArrowLeft,{className:"h-6 w-6"})}),(0,s.jsxs)("span",{className:"text-lg font-medium text-foreground",children:["Заказ #",i.id.slice(0,8)]})]}),(0,s.jsxs)("main",{className:"px-4 py-4",children:[(0,s.jsx)(x.Card,{className:(0,h.cn)("border-0 shadow-sm mb-4",N&&"bg-destructive/10"),children:(0,s.jsx)(x.CardContent,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:(0,h.cn)("w-12 h-12 rounded-full flex items-center justify-center",N?"bg-destructive":g[i.status]),children:N?(0,s.jsx)(c.XCircle,{className:"w-6 h-6 text-destructive-foreground"}):v?(0,s.jsx)(a.default,{className:"w-6 h-6 text-primary-foreground"}):(0,s.jsx)(n.Clock,{className:"w-6 h-6 text-primary-foreground animate-pulse"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"font-semibold text-foreground",children:N?"Заказ отменён":v?"Заказ доставлен!":"Заказ в обработке"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:(l=i.created_at,new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"long",hour:"2-digit",minute:"2-digit"}).format(new Date(l)))})]})]})})}),!N&&(0,s.jsx)(x.Card,{className:"border-0 shadow-sm mb-4",children:(0,s.jsxs)(x.CardContent,{className:"p-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-foreground mb-4",children:"Статус заказа"}),(0,s.jsx)("div",{className:"space-y-4",children:p.map((e,t)=>{let r=e.icon,a=t<=y,n=t===y;return(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:(0,h.cn)("w-8 h-8 rounded-full flex items-center justify-center transition-colors",a?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:(0,s.jsx)(r,{className:"w-4 h-4"})}),(0,s.jsx)("span",{className:(0,h.cn)("font-medium transition-colors",a?"text-foreground":"text-muted-foreground",n&&"text-primary"),children:e.label}),n&&!v&&(0,s.jsx)("span",{className:"ml-auto text-xs text-primary animate-pulse",children:"Текущий"})]},e.key)})})]})}),(0,s.jsx)(x.Card,{className:"border-0 shadow-sm mb-4",children:(0,s.jsxs)(x.CardContent,{className:"p-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-foreground mb-3",children:"Детали заказа"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Тип заказа"}),(0,s.jsx)("span",{className:"text-foreground",children:j[i.order_type||"delivery"]||i.order_type})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Имя"}),(0,s.jsx)("span",{className:"text-foreground",children:i.customer_name})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Телефон"}),(0,s.jsx)("span",{className:"text-foreground",children:i.customer_phone})]}),i.delivery_address&&(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Адрес"}),(0,s.jsx)("span",{className:"text-foreground text-right max-w-[60%]",children:i.delivery_address})]}),void 0!==i.utensils_count&&i.utensils_count>0&&(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Приборы"}),(0,s.jsx)("span",{className:"text-foreground",children:i.utensils_count})]}),i.notes&&(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Комментарий"}),(0,s.jsx)("span",{className:"text-foreground text-right max-w-[60%]",children:i.notes})]})]})]})}),(0,s.jsx)(x.Card,{className:"border-0 shadow-sm",children:(0,s.jsxs)(x.CardContent,{className:"p-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-foreground mb-3",children:"Состав заказа"}),(0,s.jsxs)("div",{className:"space-y-2",children:[i.order_items.map(e=>(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsxs)("span",{className:"text-muted-foreground",children:[e.menu_item?.name||"Позиция"," x",e.quantity]}),(0,s.jsxs)("span",{className:"text-foreground",children:[e.unit_price*e.quantity," сом"]})]},e.id)),(0,s.jsxs)("div",{className:"border-t border-border pt-2 mt-2",children:[i.delivery_fee&&i.delivery_fee>0&&(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Доставка"}),(0,s.jsxs)("span",{className:"text-foreground",children:[i.delivery_fee," сом"]})]}),(0,s.jsxs)("div",{className:"flex justify-between font-semibold mt-2",children:[(0,s.jsx)("span",{className:"text-foreground",children:"Итого"}),(0,s.jsxs)("span",{className:"text-foreground",children:[i.total_amount," сом"]})]})]})]})]})})]}),(0,s.jsx)("div",{className:"fixed bottom-0 left-0 right-0 p-4 pb-6 bg-gradient-to-t from-background via-background to-transparent",children:(0,s.jsxs)(m.Button,{variant:"outline",className:"w-full h-14 text-lg font-medium rounded-xl bg-transparent",onClick:()=>d.push("/"),children:[(0,s.jsx)(o,{className:"mr-2 h-5 w-5"}),"Вернуться в меню"]})})]})}e.s(["OrderStatusContent",()=>b],91171)}]);