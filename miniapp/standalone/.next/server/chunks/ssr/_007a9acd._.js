module.exports=[41710,a=>{"use strict";let b=(0,a.i(70106).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);a.s(["Clock",()=>b],41710)},3130,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},34157,a=>{"use strict";let b=(0,a.i(70106).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["default",()=>b])},52100,a=>{"use strict";var b=function(){return(b=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};function c(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c}function d(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})}function e(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))}"function"==typeof SuppressedError&&SuppressedError,a.s(["__assign",()=>b,"__awaiter",()=>d,"__rest",()=>c,"__spreadArray",()=>e])},210,a=>{"use strict";let b=(0,a.i(70106).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},11719,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(34157),e=e,f=a.i(41710),g=a.i(61580),h=a.i(93688),i=a.i(83497),j=a.i(62722);let k=(0,a.i(70106).default)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);var l=a.i(210),m=a.i(40695),n=a.i(3130),o=a.i(69240),p=a.i(97895);let q=[{key:"pending",label:"Заказ принят",icon:f.Clock},{key:"confirmed",label:"Подтверждён",icon:e.default},{key:"preparing",label:"Готовится",icon:g.ChefHat},{key:"delivering",label:"В пути",icon:h.Bike},{key:"delivered",label:"Доставлен",icon:i.Package}],r={pending:"bg-amber-500",confirmed:"bg-blue-500",preparing:"bg-orange-500",delivering:"bg-primary",delivered:"bg-green-500",cancelled:"bg-destructive"},s={delivery:"Доставка",pickup:"Самовывоз",preorder:"Предзаказ"};function t({order:a}){let g,h=(0,d.useRouter)(),[i,t]=(0,c.useState)(a);(0,c.useEffect)(()=>{let a=(0,o.createClient)(),b=a.channel(`order-${i.id}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"orders",filter:`id=eq.${i.id}`},a=>{t(b=>({...b,...a.new}))}).subscribe();return()=>{a.removeChannel(b)}},[i.id]);let u=q.findIndex(a=>a.key===i.status),v="cancelled"===i.status,w="delivered"===i.status;return(0,b.jsxs)("div",{className:"min-h-screen bg-background pb-24",children:[(0,b.jsxs)("header",{className:"sticky top-0 z-50 flex items-center gap-3 bg-background px-4 py-3 border-b border-border",children:[(0,b.jsx)("button",{onClick:()=>h.push("/"),className:"text-foreground",children:(0,b.jsx)(l.ArrowLeft,{className:"h-6 w-6"})}),(0,b.jsxs)("span",{className:"text-lg font-medium text-foreground",children:["Заказ #",i.id.slice(0,8)]})]}),(0,b.jsxs)("main",{className:"px-4 py-4",children:[(0,b.jsx)(n.Card,{className:(0,p.cn)("border-0 shadow-sm mb-4",v&&"bg-destructive/10"),children:(0,b.jsx)(n.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:(0,p.cn)("w-12 h-12 rounded-full flex items-center justify-center",v?"bg-destructive":r[i.status]),children:v?(0,b.jsx)(j.XCircle,{className:"w-6 h-6 text-destructive-foreground"}):w?(0,b.jsx)(e.default,{className:"w-6 h-6 text-primary-foreground"}):(0,b.jsx)(f.Clock,{className:"w-6 h-6 text-primary-foreground animate-pulse"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"font-semibold text-foreground",children:v?"Заказ отменён":w?"Заказ доставлен!":"Заказ в обработке"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:(g=i.created_at,new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"long",hour:"2-digit",minute:"2-digit"}).format(new Date(g)))})]})]})})}),!v&&(0,b.jsx)(n.Card,{className:"border-0 shadow-sm mb-4",children:(0,b.jsxs)(n.CardContent,{className:"p-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-foreground mb-4",children:"Статус заказа"}),(0,b.jsx)("div",{className:"space-y-4",children:q.map((a,c)=>{let d=a.icon,e=c<=u,f=c===u;return(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:(0,p.cn)("w-8 h-8 rounded-full flex items-center justify-center transition-colors",e?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:(0,b.jsx)(d,{className:"w-4 h-4"})}),(0,b.jsx)("span",{className:(0,p.cn)("font-medium transition-colors",e?"text-foreground":"text-muted-foreground",f&&"text-primary"),children:a.label}),f&&!w&&(0,b.jsx)("span",{className:"ml-auto text-xs text-primary animate-pulse",children:"Текущий"})]},a.key)})})]})}),(0,b.jsx)(n.Card,{className:"border-0 shadow-sm mb-4",children:(0,b.jsxs)(n.CardContent,{className:"p-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-foreground mb-3",children:"Детали заказа"}),(0,b.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Тип заказа"}),(0,b.jsx)("span",{className:"text-foreground",children:s[i.order_type||"delivery"]||i.order_type})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Имя"}),(0,b.jsx)("span",{className:"text-foreground",children:i.customer_name})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Телефон"}),(0,b.jsx)("span",{className:"text-foreground",children:i.customer_phone})]}),i.delivery_address&&(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Адрес"}),(0,b.jsx)("span",{className:"text-foreground text-right max-w-[60%]",children:i.delivery_address})]}),void 0!==i.utensils_count&&i.utensils_count>0&&(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Приборы"}),(0,b.jsx)("span",{className:"text-foreground",children:i.utensils_count})]}),i.notes&&(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Комментарий"}),(0,b.jsx)("span",{className:"text-foreground text-right max-w-[60%]",children:i.notes})]})]})]})}),(0,b.jsx)(n.Card,{className:"border-0 shadow-sm",children:(0,b.jsxs)(n.CardContent,{className:"p-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-foreground mb-3",children:"Состав заказа"}),(0,b.jsxs)("div",{className:"space-y-2",children:[i.order_items.map(a=>(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsxs)("span",{className:"text-muted-foreground",children:[a.menu_item?.name||"Позиция"," x",a.quantity]}),(0,b.jsxs)("span",{className:"text-foreground",children:[a.unit_price*a.quantity," сом"]})]},a.id)),(0,b.jsxs)("div",{className:"border-t border-border pt-2 mt-2",children:[i.delivery_fee&&i.delivery_fee>0&&(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Доставка"}),(0,b.jsxs)("span",{className:"text-foreground",children:[i.delivery_fee," сом"]})]}),(0,b.jsxs)("div",{className:"flex justify-between font-semibold mt-2",children:[(0,b.jsx)("span",{className:"text-foreground",children:"Итого"}),(0,b.jsxs)("span",{className:"text-foreground",children:[i.total_amount," сом"]})]})]})]})]})})]}),(0,b.jsx)("div",{className:"fixed bottom-0 left-0 right-0 p-4 pb-6 bg-gradient-to-t from-background via-background to-transparent",children:(0,b.jsxs)(m.Button,{variant:"outline",className:"w-full h-14 text-lg font-medium rounded-xl bg-transparent",onClick:()=>h.push("/"),children:[(0,b.jsx)(k,{className:"mr-2 h-5 w-5"}),"Вернуться в меню"]})})]})}a.s(["OrderStatusContent",()=>t],11719)}];

//# sourceMappingURL=_007a9acd._.js.map